<%- include('./partials/header') %>

<% if (success.length > 0) { %>
  <div class="fixed top-6 left-1/2 -translate-x-1/2 z-50 px-6 py-3 rounded-xl bg-emerald-500 shadow-xl">
    <span class="text-white font-medium tracking-wide">
      <%= success %>
    </span>
  </div>
<% } %>

<div class="w-full min-h-screen bg-[#f7f7f5] px-20 py-16 flex gap-16">

  <!-- SIDEBAR -->
  <aside class="w-[22%] h-full">

    <div class="mb-12">
      <h3 class="text-sm uppercase tracking-widest text-zinc-500 mb-3">
        Sort Products
      </h3>
      <form action="/shop">
        <select
          class="w-full border border-zinc-300 px-4 py-3 rounded-lg bg-white focus:ring-2 focus:ring-zinc-900 outline-none">
          <option value="popular">Popular</option>
          <option value="newest">Newest</option>
        </select>
      </form>
    </div>

    <div class="mb-16">
      <h3 class="text-sm uppercase tracking-widest text-zinc-500 mb-5">
        Collections
      </h3>
      <a class="block mb-3 text-zinc-800 hover:font-semibold" href="">New Collection</a>
      <a class="block mb-3 text-zinc-800 hover:font-semibold" href="">All Products</a>
      <a class="block mb-3 text-zinc-800 hover:font-semibold" href="">Discounted Products</a>
    </div>

    <div>
      <h3 class="text-sm uppercase tracking-widest text-zinc-500 mb-5">
        Filters
      </h3>
      <a class="block mb-3 text-zinc-700 hover:text-black" href="">Availability</a>
      <a class="block mb-3 text-zinc-700 hover:text-black" href="">Discount</a>
    </div>

  </aside>

  <!-- PRODUCTS -->
  <section class="w-[78%]">

    <div class="grid grid-cols-3 gap-10">

      <% products.forEach(function(product){ %>

        <div class="rounded-2xl overflow-hidden shadow-lg bg-white hover:shadow-2xl transition">

          <!-- IMAGE -->
          <div class="h-56 flex items-center justify-center bg-[<%= product.bgcolor %>]">
            <img
              class="h-[11rem] object-contain"
              src="data:image/jpeg;base64,<%= product.image.toString('base64') %>"
              alt="">
          </div>

          <!-- DETAILS -->
          <div
            class="px-5 py-5 flex justify-between items-center bg-[<%= product.panelcolor %>] text-[<%= product.textcolor %>]">

            <div>
              <h3 class="text-sm">
                <span class="font-semibold uppercase tracking-wide">
                  <%= product.brand %>
                </span>
                <br>
                <span class="text-base">
                  <%= product.name %>
                </span>
              </h3>
              <h4 class="mt-2 text-lg font-semibold">
                â‚¹ <%= product.price %>
              </h4>
            </div>

            <a
              class="w-9 h-9 flex items-center justify-center rounded-full bg-white shadow hover:scale-110 transition"
              href="/product/addtocart/<%= product._id %>">
              <i class="ri-add-line text-lg"></i>
            </a>

          </div>

        </div>

      <% }) %>

    </div>
  </section>

</div>

<%- include('./partials/footer') %>
